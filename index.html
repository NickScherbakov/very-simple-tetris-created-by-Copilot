<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#7b68ee">
    <meta name="description" content="–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ Tetris —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –≤–∞–ª—é—Ç–æ–π –∏ —Å–∏—Å—Ç–µ–º–æ–π —Å—Ç–∞–≤–æ–∫">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Tetris PWA">
    
    <title>Tetris PWA - TetriCoins Edition</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Icons -->
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/icons/icon-512x512.png">
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/betting-panel.css">
</head>
<body>
    <div class="game-container">
        <div class="score-section">
            <div class="score">Score: <span id="score">0</span></div>
            <div class="level">Level: <span id="level">1</span></div>
            <div class="lines">Lines: <span id="lines">0</span></div>
            <div class="high-score">High Score: <span id="high-score">0</span></div>
            <div class="balance">üí∞ Balance: <span id="tetricoins-balance">1000</span> TC</div>
        </div>

        <canvas id="tetris-canvas" width="300" height="600"></canvas>

        <div class="next-piece">
            <h3>Next:</h3>
            <canvas id="next-piece-canvas" width="100" height="100"></canvas>
        </div>

        <div class="controls-instructions">
            <h3>Controls:</h3>
            <p>Enter/S: Start Game | Arrow Keys: Move/Drop | Space: Hard Drop | P: Pause | G: Toggle Grid | T: Take Control (AI Mode)</p>
        </div>

        <div class="game-buttons">
            <button id="start-btn" class="button">Start Game</button>
            <button id="ai-vs-ai-btn" class="button button-primary">AI vs AI Mode</button>
            <button id="tournament-btn" class="button button-tournament">Tournament Mode</button>
            <button id="grid-toggle" class="button button-secondary">Hide Grid</button>
            <button id="install-pwa-btn" class="button button-install" style="display: none;">Install App</button>
            <button id="achievements-btn" class="button button-achievements">üèÜ Achievements</button>
            <button id="share-btn" class="button button-share">üì§ Share</button>
        </div>

        <div class="ai-insight">
            <h3>AI Insight:</h3>
            <p id="ai-summary">The adaptive engine is observing your moves.</p>
        </div>

        <div class="ai-vs-ai-panel" id="ai-vs-ai-panel" style="display: none;">
            <div class="ai-player ai-player-1">
                <h4>AI Player 1 (Red)</h4>
                <div class="ai-thinking" id="ai1-thinking">AI 1 is analyzing...</div>
                <div class="ai-plan" id="ai1-plan">Planning next move...</div>
            </div>
            <div class="ai-player ai-player-2">
                <h4>AI Player 2 (Blue)</h4>
                <div class="ai-thinking" id="ai2-thinking">AI 2 is analyzing...</div>
                <div class="ai-plan" id="ai2-plan">Planning next move...</div>
            </div>
            <div class="game-controls">
                <button id="take-control-btn" class="button button-warning">Take Control</button>
                <button id="exit-ai-mode-btn" class="button button-secondary">Exit AI Mode</button>
                <div class="current-turn" id="current-turn">AI 1's Turn</div>
            </div>
        </div>
    </div>
    
    <!-- Betting Panel -->
    <div id="betting-panel" class="betting-panel">
        <div class="betting-header">
            <h2>üé≤ –°–¥–µ–ª–∞–π—Ç–µ —Å—Ç–∞–≤–∫—É!</h2>
            <div class="betting-countdown-wrapper">
                <p>–í—Ä–µ–º–µ–Ω–∏ –æ—Å—Ç–∞–ª–æ—Å—å: <span id="betting-countdown" class="betting-countdown">15</span> —Å–µ–∫</p>
            </div>
        </div>
        
        <div id="tournament-progress" class="tournament-progress" style="display: none;">
            <h3>üèÜ –¢—É—Ä–Ω–∏—Ä</h3>
            <div class="match-counter">–ú–∞—Ç—á <span id="current-match">1</span> –∏–∑ 5</div>
            <div class="jackpot-display">
                –î–∂–µ–∫–ø–æ—Ç: <span class="amount" id="jackpot-amount">0</span> TC
            </div>
        </div>
        
        <div class="bet-types" id="bet-types">
            <div class="bet-type-card" data-bet-type="winner">
                <div class="bet-type-title">
                    <h3>üèÜ –ü–æ–±–µ–¥–∏—Ç–µ–ª—å</h3>
                    <span class="bet-odds">2.0x</span>
                </div>
                <div class="bet-type-desc">–°—Ç–∞–≤–∫–∞ –Ω–∞ –ø–æ–±–µ–¥–∏—Ç–µ–ª—è –º–∞—Ç—á–∞</div>
                <div class="bet-options">
                    <button class="bet-option-btn" data-target="1">AI 1</button>
                    <button class="bet-option-btn" data-target="2">AI 2</button>
                </div>
            </div>
            
            <div class="bet-type-card" data-bet-type="first_tetris">
                <div class="bet-type-title">
                    <h3>‚ö° –ü–µ—Ä–≤—ã–π Tetris</h3>
                    <span class="bet-odds">5.0x</span>
                </div>
                <div class="bet-type-desc">–ö—Ç–æ –ø–µ—Ä–≤—ã–º —Å–æ–±–µ—Ä—ë—Ç 4 –ª–∏–Ω–∏–∏</div>
                <div class="bet-options">
                    <button class="bet-option-btn" data-target="1">AI 1</button>
                    <button class="bet-option-btn" data-target="2">AI 2</button>
                </div>
            </div>
            
            <div class="bet-type-card" data-bet-type="score_range">
                <div class="bet-type-title">
                    <h3>üéØ –î–∏–∞–ø–∞–∑–æ–Ω –æ—á–∫–æ–≤</h3>
                    <span class="bet-odds">3-10x</span>
                </div>
                <div class="bet-type-desc">–£–≥–∞–¥–∞–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å—á—ë—Ç–∞</div>
                <div class="bet-options">
                    <button class="bet-option-btn" data-target="0-1000">0-1000</button>
                    <button class="bet-option-btn" data-target="1001-2000">1001-2000</button>
                    <button class="bet-option-btn" data-target="2001-3000">2001-3000</button>
                    <button class="bet-option-btn" data-target="5001+">5001+</button>
                </div>
            </div>
            
            <div class="bet-type-card" data-bet-type="score_race">
                <div class="bet-type-title">
                    <h3>üèÉ –ì–æ–Ω–∫–∞ –æ—á–∫–æ–≤</h3>
                    <span class="bet-odds">1.5x</span>
                </div>
                <div class="bet-type-desc">–ö—Ç–æ –ø–µ—Ä–≤—ã–º –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç 1000 –æ—á–∫–æ–≤</div>
                <div class="bet-options">
                    <button class="bet-option-btn" data-target="1">AI 1</button>
                    <button class="bet-option-btn" data-target="2">AI 2</button>
                </div>
            </div>
        </div>
        
        <div class="bet-amount-section">
            <h3>üí∞ –°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏:</h3>
            <div class="quick-bet-buttons">
                <button class="quick-bet-btn" data-amount="10">10 TC</button>
                <button class="quick-bet-btn" data-amount="50">50 TC</button>
                <button class="quick-bet-btn" data-amount="100">100 TC</button>
                <button class="quick-bet-btn" data-amount="250">250 TC</button>
                <button class="quick-bet-btn" data-amount="500">500 TC</button>
            </div>
            <div class="custom-bet-input">
                <input type="number" id="custom-bet-amount" placeholder="–°–≤–æ—è —Å—É–º–º–∞" min="10" max="500">
            </div>
        </div>
        
        <div id="current-bet-display"></div>
        
        <button id="place-bet-btn" class="place-bet-btn" disabled>–°–¥–µ–ª–∞—Ç—å —Å—Ç–∞–≤–∫—É</button>
        <button id="cancel-bet-btn" class="cancel-bet-btn">–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å</button>
    </div>
    
    <!-- Achievements Modal -->
    <div id="achievements-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal" id="close-achievements">&times;</span>
            <h2>üèÜ –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
            <div class="achievements-progress">
                <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: <span id="achievements-progress">0</span>%</p>
            </div>
            <div id="achievements-list" class="achievements-list"></div>
            <h3>üìä –¢–∞–±–ª–∏—Ü–∞ –ª–∏–¥–µ—Ä–æ–≤</h3>
            <div id="leaderboard" class="leaderboard"></div>
        </div>
    </div>
    
    <!-- Footer with disclaimer -->
    <footer class="game-footer">
        <p>üéÆ –≠—Ç–æ –∏–≥—Ä–∞ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –≤–∞–ª—é—Ç—É. –†–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è. –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è!</p>
    </footer>
    
    <!-- Scripts -->
    <script src="js/currency.js"></script>
    <script src="js/betting.js"></script>
    <script src="js/achievements.js"></script>
    <script src="js/pwa.js"></script>
    <script src="tetris.js"></script>
</body>
</html>
